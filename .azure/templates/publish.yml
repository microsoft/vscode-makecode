parameters:
  - name: isPreRelease
    type: boolean

- ${{ if eq(parameters.isPreRelease, true) }}:
  - script: npx @vscode/vsce publish --packagePath $(Pipeline.Workspace)/extension/pxt-vscode-web.vsix --pre-release --noVerify
        displayName: Publish pre-release extension
        env:
          # Marketplace PAT needs to be uploaded as a pipeline variable
          VSCE_PAT: $(marketplace-pat)

- ${{ if eq(parameters.isPreRelease, false) }}:
  - script: npx @vscode/vsce publish --packagePath $(Pipeline.Workspace)/extension/pxt-vscode-web.vsix --noVerify
        displayName: Publish extension
        env:
          VSCE_PAT: $(marketplace-pat)