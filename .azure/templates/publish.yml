parameters:
  - name: isPreRelease
    type: boolean

# variables:
  # - name: VSIX_Name
    # value: $[ stageDependencies.Build.Build.outputs['SetExtensionName.VSIX'] ]

steps:
- bash: |
    echo "Beginning publish stage"

- download: current
  artifact: $(vsixName)

- ${{ if parameters.isPreRelease }}:
  - bash: echo "Publishing PreRelease"
  # Don't want to accidentally publish while testing
  # - script: npx @vscode/vsce publish --packagePath $(Pipeline.Workspace)/extension/pxt-vscode-web.vsix --pre-release --noVerify
        # displayName: Publish pre-release extension
        # env:
          # # Marketplace PAT needs to be uploaded as a pipeline variable
          # VSCE_PAT: $(marketplace-pat)

- ${{ else }}:
  - bash: echo "Publishing Release"
  # Don't want to accidentally publish while testing
  # - script: npx @vscode/vsce publish --packagePath $(Pipeline.Workspace)/extension/pxt-vscode-web.vsix --noVerify
        # displayName: Publish extension
        # env:
          # VSCE_PAT: $(marketplace-pat)
